(()=>{var t,e={497:(t,e,s)=>{"use strict";s.d(e,{eI:()=>v,uc:()=>L});var i=s(512);const r=JSON.parse('{"bundles":[{"name":"game","assets":[{"name":"logo","srcs":"assets/core/logo_white.png"}]},{"name":"fonts","assets":[{"name":"font","srcs":"assets//Sniglet-Regular.ttf"}]}]}'),n={extension:i.ExtensionType.ResolveParser,test:t=>i.settings.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:i.resolveTextureUrl.parse};i.extensions.add(n);var o=s(358),l=s(607),a=s(67);class h{constructor(t){this.levelController=t,this.blocker=document.getElementById("blocker-container"),this.container=this.createContainer("drawing-container"),this.outputElement=this.createOutputElement("text-output"),this.shuffleImg=document.querySelector(".shuffle-symbol img"),this.lines=this.createDrawingLines(4),this.currentLineIndex=0,this.letters=document.querySelectorAll(".letter"),this.isDrawing=!1,this.startX=0,this.startY=0,this.currentLetter=null,this.lastLetter=null,this.visitedLetters=new Set,this.lineCount=0,this.selectedLetters=[],this.init()}createContainer(t){let e=document.getElementById(t);return e||(e=document.createElement("div"),e.id=t,e.style.position="absolute",e.style.zIndex="1",document.body.appendChild(e)),e}createOutputElement(t){let e=document.getElementById(t);return e||(e=document.createElement("div"),e.id=t,document.body.appendChild(e)),e}createDrawingLines(t){const e=[];for(let s=0;s<t;s++){const t=document.createElement("div");t.className="drawing-line",Object.assign(t.style,{position:"fixed",height:"5px",backgroundColor:"rgb(241, 136, 0)",transformOrigin:"left center",zIndex:"5555"}),this.container.appendChild(t),e.push(t)}return e}init(){this.letters.forEach((t=>{t.addEventListener("mousedown",(e=>this.handleLetterMouseDown(e,t))),t.addEventListener("mouseover",(e=>this.handleLetterMouseOver(e,t)))})),document.addEventListener("mousemove",this.handleMouseMove.bind(this)),document.addEventListener("mouseup",this.handleMouseUp.bind(this))}getCurrentLine(){return this.lines[this.currentLineIndex]}getLetterBottomCenter(t){const e=t.getBoundingClientRect(),s=this.container.getBoundingClientRect();return{x:e.left+e.width/2-s.left,y:e.bottom-e.height/2-s.top}}drawLineBetweenPoints(t,e,s,i,r){const n=Math.sqrt(Math.pow(s-t,2)+Math.pow(i-e,2)),o=Math.atan2(i-e,s-t);Object.assign(r.style,{left:`${t+this.container.getBoundingClientRect().left}px`,top:e+this.container.getBoundingClientRect().top-2.5+"px",width:`${n}px`,transform:`rotate(${o}rad)`})}handleLetterMouseDown(t,e){if(this.shuffleImg.parentElement.classList.add("disabled"),this.visitedLetters.has(e))return;this.isDrawing=!0,this.currentLetter=e,this.lastLetter=e,this.visitedLetters.add(e),this.selectedLetters.push(e.textContent),this.updateOutputText();const s=this.getLetterBottomCenter(e);this.startX=s.x,this.startY=s.y,e.classList.add("visited"),t.stopPropagation()}handleLetterMouseOver(t,e){if(!this.isDrawing||!this.currentLetter)return;if(e===this.currentLetter)return;if(this.lineCount>=3&&!this.visitedLetters.has(e))return;if(this.visitedLetters.has(e)){if(this.selectedLetters.indexOf(e.textContent)===this.selectedLetters.length-2){this.getCurrentLine().style.width="0";const t=this.currentLetter;return this.visitedLetters.delete(t),t.classList.remove("visited"),t.classList.remove("show-circle"),t.classList.add("hide-circle"),t.classList.remove("disabled"),t.classList.add("enabled"),this.selectedLetters.pop(),this.updateOutputText(),this.lineCount--,this.currentLineIndex=(this.currentLineIndex-1+3)%3,void(this.currentLetter=e)}return}const s=this.getLetterBottomCenter(e),i=this.getLetterBottomCenter(this.currentLetter),r=this.getCurrentLine();this.drawLineBetweenPoints(i.x,i.y,s.x,s.y,r),e.classList.add("visited"),this.visitedLetters.add(e),this.selectedLetters.push(e.textContent),this.updateOutputText(),this.lastLetter=this.currentLetter,this.currentLetter=e,this.currentLineIndex=(this.currentLineIndex+1)%4,this.lineCount++}handleMouseMove(t){if(this.outputElement.classList.remove("disabled"),!this.isDrawing||!this.currentLetter||this.lineCount>=3)return;const e=this.getLetterBottomCenter(this.currentLetter),s=this.getCurrentLine();this.drawLineBetweenPoints(e.x,e.y,t.clientX-this.container.getBoundingClientRect().left,t.clientY-this.container.getBoundingClientRect().top,s)}handleMouseUp(){this.shuffleImg.parentElement.classList.remove("disabled"),this.isDrawing&&(this.blocker.classList.remove("disabled"),this.blocker.classList.add("enabled")),this.isDrawing=!1,this.currentLineIndex=0,this.currentLetter=null,this.lastLetter=null,this.resetAllLines(),this.resetAllLetters();const t=this.outputElement.textContent,e=this.levelController.checkWordRepeat(t),s=this.levelController.checkWordMatch(t);e?(this.outputElement.classList.add("shake"),setTimeout((()=>{this.outputElement.classList.remove("shake"),this.resetText(),this.blocker.classList.remove("enabled"),this.blocker.classList.add("disabled")}),300)):s?(this.blocker.classList.remove("disabled"),this.blocker.classList.add("enabled"),this.correctWords||(this.correctWords=[]),this.levelController.positionSetter(t),this.removeLetters(),setTimeout((()=>{this.blocker.classList.remove("enabled"),this.blocker.classList.add("disabled")}),700)):(this.outputElement.classList.add("shake"),setTimeout((()=>{this.outputElement.classList.remove("shake"),this.resetText(),this.blocker.classList.remove("enabled"),this.blocker.classList.add("disabled")}),350))}removeLetters(){const t=this.outputElement.textContent;let e=0;const s=setInterval((()=>{if(e<=t.length){const s=t.slice(e);this.outputElement.textContent=s,e++}else clearInterval(s)}),100)}updateOutputText(){this.outputElement.textContent=this.selectedLetters.join("")}resetText(){this.updateOutputText(),this.blocker.classList.remove("enabled"),this.blocker.classList.add("disabled")}resetAllLines(){this.lines.forEach((t=>t.style.width="0")),this.lineCount=0}resetAllLetters(){this.letters.forEach((t=>{t.classList.remove("visited")})),this.visitedLetters.clear(),this.selectedLetters=[]}cleanup(){this.letters.forEach((t=>{t.removeEventListener("mousedown",this.handleLetterMouseDown),t.removeEventListener("mouseover",this.handleLetterMouseOver)})),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.body.removeChild(this.container),this.outputElement&&document.body.removeChild(this.outputElement)}}class d{constructor(){this.letters=[],this.isMouseDown=!1,this.activeLetters=new Set,this.init()}init(){this.updateLetters(),document.addEventListener("mouseup",(()=>this.handleGlobalMouseUp())),document.addEventListener("touchend",(()=>this.handleGlobalMouseUp()))}updateLetters(){const t=document.querySelectorAll(".letter");t.forEach((t=>{this.letters.includes(t)||(t.addEventListener("mousedown",(e=>this.handleMouseDown(e,t))),t.addEventListener("mouseover",(e=>this.handleMouseOver(e,t))),t.addEventListener("touchstart",(e=>{e.preventDefault(),this.handleMouseDown(e,t)})))})),this.letters=Array.from(t)}handleMouseDown(t,e){this.isMouseDown=!0,this.activeLetters.add(e),e.classList.remove("hide-circle"),e.classList.add("show-circle"),e.classList.remove("enabled"),e.classList.add("disabled")}handleMouseOver(t,e){this.isMouseDown&&(this.activeLetters.add(e),e.classList.add("show-circle"),e.classList.remove("enabled"),e.classList.add("disabled"))}handleGlobalMouseUp(){this.isMouseDown=!1,this.activeLetters.forEach((t=>{t.classList.remove("hide-circle"),t.classList.remove("show-circle")})),this.activeLetters.forEach((t=>{t.classList.remove("disabled"),t.classList.add("enabled")})),this.activeLetters.clear()}cleanup(){document.removeEventListener("mouseup",this.handleGlobalMouseUp),document.removeEventListener("touchend",this.handleGlobalMouseUp),this.letters.forEach((t=>{t.removeEventListener("mousedown",this.handleMouseDown),t.removeEventListener("mouseover",this.handleMouseOver),t.removeEventListener("touchstart",this.handleMouseDown)}))}refreshLetters(){this.updateLetters()}}class c{constructor(){this.shuffleButton=document.getElementById("shuffle-symbol"),this.letters=Array.from(document.querySelectorAll(".letter")),this.init()}init(){this.shuffleButton.addEventListener("mousedown",this.shuffleLetters.bind(this))}shuffleLetters(){if(this.shuffleButton.classList.contains("animated"))return;this.shuffleButton.classList.remove("enabled"),this.shuffleButton.classList.add("animated"),this.shuffleButton.classList.add("disabled"),this.letters.forEach((t=>t.classList.add("animated")));const t=this.shuffleArray([{top:"10%",left:"45%"},{top:"36%",left:"70%"},{top:"62%",left:"45%"},{top:"36%",left:"19%"}]);this.letters.forEach(((e,s)=>{const{top:i,left:r}=t[s];e.style.top=i,e.style.left=r})),setTimeout((()=>{this.shuffleButton.classList.remove("disabled"),this.shuffleButton.classList.remove("animated"),this.letters.forEach((t=>t.classList.remove("animated")))}),500)}shuffleArray(t){let e,s;do{e=[...t];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}s=this.arraysAreEqual(t,e)}while(s);return e}arraysAreEqual(t,e){return t.every(((t,s)=>t===e[s]))}cleanup(){this.shuffleButton.removeEventListener("mousedown",this.shuffleLetters.bind(this))}}const u={level1:{lvl1Letters:"G,O,D,L",lvl1Words:"GOLD,GOD,DOG,LOG",realData:"0,0,GOLD,H|0,0,GOD,V|2,0,DOG,H|0,2,LOG,V"},levelTest:{lvl1Letters:"C,A,T,E",lvl1Words:"CATE,CAT,TACE,TEC",realData:"0,0,CATE,V|0,0,CAT,H|0,2,TACE,V|2,0,TEC,H"}};class m{constructor(t){this.levelController=t,this.isMouseDown=!1,this.startTimer=3,this.timer=this.startTimer,this.countdownInterval=null,this.init()}init(){document.addEventListener("pointerdown",(()=>{this.isMouseDown=!0,this.stopTimer()})),document.addEventListener("pointerup",(()=>{this.isMouseDown=!1,this.resetTimer()}))}startCountdown(){this.countdownInterval||(this.countdownInterval=setInterval((()=>{!this.isMouseDown&&this.timer>0&&(this.timer-=.5,console.log(this.timer),this.timer<=0&&(clearInterval(this.countdownInterval),this.showHelper()))}),1e3))}stopTimer(){clearInterval(this.countdownInterval),this.countdownInterval=null,this.timer=this.startTimer}resetTimer(){this.timer=this.startTimer,this.startCountdown()}showHelper(){if(this.isMouseDown)return;const t=this.levelController.currentWords.filter((t=>!this.levelController.correctWords.includes(t)));if(0===t.length)return;const e=t[0],s=this.levelController.findWordData(e);if(s){const{startY:t,startX:i,orientation:r}=this.levelController.parseWordData(s);this.levelController.showWordSlowly(e,t,i,r)}}}class p{constructor(t){this.letterController=t,this.levelConfig=u,this.currentWords=[],this.correctWords=[],this.indexedLetters=new Set,this.outputElement=document.getElementById("text-output"),this.gridContainer=document.getElementById("grid-container"),this.afterArea=document.getElementById("after_area"),this.playNowBtn=document.getElementById("play-now"),this.itemTemplate=document.querySelector(".grid-item"),this.helperTimer=new m(this),this.indexsize=null,this.remainingWords=[],this.selectedLevel="level1",this.init(),this.initializeWordIndexes(),this.helperTimer.startCountdown()}showWordSlowly(t,e,s,i){if(this.helperTimer.isMouseDown)return;const r=t.split("");let n=s,o=e;r.forEach(((t,e)=>{setTimeout((()=>{this.helperTimer.isMouseDown||(this.showTemporaryHighlight(o,n,t),"h"===i?n++:o++)}),500*e)})),setTimeout((()=>{this.helperTimer.isMouseDown&&this.resetTimer()}),500*r.length+1e3)}showTemporaryHighlight(t,e,s){const i=Array.from(this.gridContainer.children).find((s=>Number(s.dataset.y)===t&&Number(s.dataset.x)===e));if(i){const t=i.style.backgroundColor,e=i.innerHTML;i.style.transition="background-color 0.3s ease",i.style.backgroundColor="#ffea00";const r=document.createElement("span");r.textContent=s,r.style.color="white",r.style.fontSize="50px",r.style.fontFamily="Sniglet, sans-serif",i.innerHTML="",i.appendChild(r),setTimeout((()=>{this.isInputActive||(i.style.backgroundColor=t,i.innerHTML=e)}),400)}}highlightWord(t,e,s,i){if(this.helperTimer.isMouseDown)return;const r=t.split("");let n=s,o=e;r.forEach(((t,e)=>{setTimeout((()=>{this.animateGridTransitionByCoordinates(t,o,n,e),"h"===i?n++:o++}),50*e)}))}animateGridTransitionByCoordinates(t,e,s,i){const r=Array.from(this.gridContainer.children).find((t=>Number(t.dataset.y)===e&&Number(t.dataset.x)===s));if(!r)return void console.error(`errrorr (${e}, ${s})`);const n=this.outputElement.getBoundingClientRect(),o=document.createElement("span");o.textContent=t,o.style.position="absolute";const l=30*i;o.style.left=`${n.left+l}px`,o.style.top=`${n.top}px`,o.style.opacity=1,o.style.color="white",o.style.fontSize="40px",o.style.fontFamily="Sniglet, sans-serif",document.body.appendChild(o),setTimeout((()=>{const t=r.getBoundingClientRect(),e=o.offsetWidth,s=o.offsetHeight;o.style.position="absolute";const i=t.left+(t.width-e)/2,n=t.top+(t.height-s)/2;o.style.fontSize="50px",o.style.transition="left 0.5s cubic-bezier(0.5, 0, 1, 1), top 0.5s cubic-bezier(0.5, 0, 1, 1), opacity 0.5s cubic-bezier(0.5, 0, 1, 1)",o.style.left=i-3+"px",o.style.top=n-10+"px",setTimeout((()=>{if(r.childElementCount>0)return o.style.opacity=0,r.style.transition="background-color 0.5s ease",r.style.backgroundColor="#ffea00",void setTimeout((()=>{r.style.backgroundColor="#ff8000"}),250);o.style.position="static",r.style.opacity=1,r.style.transition="background-color 0.5s ease",r.style.backgroundColor="#ffea00",setTimeout((()=>{r.style.backgroundColor="#ff8000"}),250),r.appendChild(o)}),500)}),100)}gridInstantiate(){for(;this.gridContainer.firstChild;)this.gridContainer.removeChild(this.gridContainer.firstChild);this.indexedLetters.forEach((({coordinates:t})=>{const e=this.itemTemplate.cloneNode();e.style.gridRowStart=t.y+1,e.style.gridColumnStart=t.x+1,e.dataset.y=t.y,e.dataset.x=t.x,this.gridContainer.appendChild(e)}))}checkWordRepeat(t){return this.correctWords.includes(t)}getRemainingWords(){return this.remainingWords=this.currentWords.filter((t=>!this.correctWords.includes(t))),this.remainingWords}checkWordMatch(t){if(-1!==this.currentWords.indexOf(t)&&!this.correctWords.includes(t)){this.correctWords.push(t);const e=this.findWordData(t);if(e){const{startY:s,startX:i,orientation:r}=this.parseWordData(e);this.highlightWord(t,s,i,r),0==this.getRemainingWords().length&&setTimeout((()=>{this.afterArea.classList.add("enabled"),this.playNowBtn.classList.add("mover")}),850)}return!0}return!1}initializeWordIndexes(){this.getRealDataEntries().forEach((t=>{const{startY:e,startX:s,orientation:i}=this.parseWordData(t);this.AllprocessWordInfo(t,e,s,i)})),this.gridInstantiate()}AllprocessWordInfo(t,e,s,i){const r=t.split(",")[2].split("");let n=s,o=e;r.forEach((t=>{const e={y:o,x:n};this.isIndexedLetter(e,t)||this.indexedLetters.add({letter:t,coordinates:e}),"h"===i?n++:o++,this.indexsize=this.indexedLetters.size}))}isIndexedLetter(t,e){return[...this.indexedLetters].some((s=>s.letter===e&&s.coordinates.x===t.x&&s.coordinates.y===t.y))}parseWordData(t){const e=t.split(",");return{startY:parseInt(e[0]),startX:parseInt(e[1]),orientation:"H"===e[3]?"h":"v"}}positionSetter(t){const e=this.findWordData(t);if(e){const{startY:s,startX:i,orientation:r}=this.parseWordData(e);this.processWordInfo(t,s,i,r)}}findWordData(t){return this.getRealDataEntries().find((e=>e.split(",")[2]===t))}processWordInfo(t,e,s,i){t.split("").forEach(((t,e)=>{}))}getRealDataEntries(){return u[this.selectedLevel].realData.split("|")}init(){const t=this.selectedLevel,e=this.levelConfig[t].lvl1Letters.split(","),s=this.levelConfig[t].lvl1Words.split(",");this.currentWords=s;const i=this.shuffleArray(e);this.updateLetters(i[0],i[1],i[2],i[3]),this.letterController.refreshLetters()}updateLetters(t,e,s,i){document.getElementById("letter1").textContent=t,document.getElementById("letter2").textContent=e,document.getElementById("letter3").textContent=s,document.getElementById("letter4").textContent=i}shuffleArray(t){let e=t.slice();for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}}class f extends i.Container{constructor(){super(),this.init()}init(){let t=i.Sprite.from("logo");t.anchor.set(.5),t.scale.set(.5),this.addChild(t),t.x=.5*L,t.y=.5*v,o.ZP.to(t,{pixi:{scale:.6},duration:1,repeat:-1,yoyo:!0,ease:"sine.easeInOut"}),this.letterController=new d,this.levelController=new p(this.letterController),this.lineController=new h(this.levelController),this.shuffleController=new c;const e=new i.Container;this.addChild(e)}resize(t,e){this.letterController.resize(t,e),this.lineController.resize(t,e),this.shuffleController.resize(t,e),this.levelController.resize(t,e)}cleanup(){this.letterController?.cleanup(),this.lineController?.cleanup(),this.shuffleController?.cleanup(),this.levelController.cleanup(),this.removeChildren()}}const L=480,v=800,g=new i.Application({backgroundColor:0,antialias:!0,hello:!0,width:L,height:v});g.ticker.stop(),o.p8.ticker.add((()=>{g.ticker.update()})),async function(){document.body.appendChild(g.view);let t=await async function(){await i.Assets.init({manifest:r});const t=await i.Assets.loadBundle(["game","fonts"]),e=r.bundles.map((t=>t.name));return i.Assets.backgroundLoadBundle(e),t.default?t.default:t}();console.log("assets",t),o.p8.registerPlugin(l.w,a.t),l.w.registerPIXI(i);const e=new f;g.stage.addChild(e)}()},654:()=>{}},s={};function i(t){var r=s[t];if(void 0!==r)return r.exports;var n=s[t]={id:t,loaded:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}i.m=e,t=[],i.O=(e,s,r,n)=>{if(!s){var o=1/0;for(d=0;d<t.length;d++){for(var[s,r,n]=t[d],l=!0,a=0;a<s.length;a++)(!1&n||o>=n)&&Object.keys(i.O).every((t=>i.O[t](s[a])))?s.splice(a--,1):(l=!1,n<o&&(o=n));if(l){t.splice(d--,1);var h=r();void 0!==h&&(e=h)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[s,r,n]},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={179:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var r,n,[o,l,a]=s,h=0;if(o.some((e=>0!==t[e]))){for(r in l)i.o(l,r)&&(i.m[r]=l[r]);if(a)var d=a(i)}for(e&&e(s);h<o.length;h++)n=o[h],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(d)},s=self.webpackChunkplayable_factory=self.webpackChunkplayable_factory||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var r=i.O(void 0,[736],(()=>i(497)));r=i.O(r)})();